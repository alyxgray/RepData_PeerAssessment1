---
title: "PA1_template"
author: "Alyx Gray"
date: "June 14, 2015"
output: html_document
---

## Introduction

The purpose of this analysis is to use activity tracking data to study a group's daily activity levels.

## Loading and preprocessing the data

Before any analyses can be performed, the raw data must be converted into a suitable data format and must undergo initial pre-processing.

```{r initialization echo=TRUE}
# Load datasets library and make large float numbers more human readable (get rid of scientific notation)
library(datasets)
options("scipen"= 100, "digits" = 4 )
```

```{r read_data echo=TRUE}
# Read in the CSV, including NAs
table <- read.table ("activity.csv", header=TRUE, sep=",", na.strings="NA")
```

```{r preprocessing_data echo=TRUE}
# Convert to a datetime.  Pad the interval to four characters so we can use strptime
table$dateTime <- as.POSIXct(
  strptime (
    sprintf ('%s %04d', table$date, table$interval),
    "%Y-%m-%d %H%M"
  )
)
```

## What is mean total number of steps taken per day?

To calculate the mean total number of steps, the NA values must first be removed from the data set and the sum of daily steps must be calculated.

```{r total_daily_steps echo=TRUE}
# Sum all the daily steps -- NAs omitted
sums <- na.omit(aggregate (list (steps = table$steps), list(date = table$date), FUN = sum))
```

The mean and median values of the total daily steps can then be calculated.

```{r mean_total_daily_steps echo=TRUE eval=TRUE}
# Calculate mean of daily total steps -- NAs omitted
stepMean <- mean(sums$steps)
```
Total Daily Steps Mean: `r stepMean[1]`

```{r median_total_daily_steps echo=TRUE eval=TRUE}
# Calculate median of daily total steps -- NAs omitted
stepMedian <- median(sums$steps)
```
Total Daily Steps Median: `r stepMedian[1]`

The total number of daily steps can be visualized as a histogram plot of the frequency versus the steps taken using the R basic plotting system.
```{r total_daily_steps_plot echo=TRUE}
# Plot total number of daily steps as a histogram --NAs omitted
png(filename = "dailystepstotal.png", width = 480, height=480, units="px")
hist (sums$steps, breaks=5, main="Total Number of Steps Taken Each Day", col="red", xlab="Steps Taken", ylab="Frequency")
dev.off()
```
![Total Number of Steps Taken Each Day](dailystepstotal.png)

## What is the average daily activity pattern?

To determine the average daily activity pattern, the step data can be aggregated and the mean for each time interval can be calculated.
```{r average_daily_activity_pattern}
# Average all the daily steps in each 5 minute interval
intervalAverageSteps <- aggregate(table$steps ~ table$interval, data.frame (table$steps, table$interval), FUN=mean, na.action=na.omit)
names(intervalAverageSteps)<-c("interval", "steps")
```

The average daily activity pattern can be visualized using the R base plotting system as a time series plot of each 5-minute time interval versus the average number of steps taken during that interval.

```{r average_daily_activity_pattern}
# Plot Average Daily Activity Pattern -- NAs omitted
png(filename = "averagedailyactivity.png", width = 480, height=480, units="px")
interval_time_x <- intervalAverageSteps$interval
interval_steps_y <- intervalAverageSteps$steps
plot(interval_time_x,interval_steps_y, type="l", main="Average Daily Activity Pattern", xlab="Time Interval (minutes)", ylab="Average Steps")
dev.off()
```
![Average Daily Activity Pattern](averagedailyactivity.png)


## Imputing missing values

## Are there differences in activity patterns between weekdays and weekends?

